# 出國前確認清單頁面規格

## 1. 頁面概述

### 1.1 頁面目的
提供旅客完整的出國前打包清單，並支援互動式勾選功能，確保旅客不遺漏任何重要物品。

### 1.2 頁面位置
- **檔案名稱**：`index.html`（首頁）
- **URL 路徑**：`/` 或 `/index.html`
- **導覽位置**：網站首頁

### 1.3 目標用戶
- 首次前往日本/沖繩的旅客
- 需要詳細打包指引的自由行旅客
- 希望確保不遺漏重要物品的旅客

---

## 2. 頁面結構

### 2.1 整體版面配置

```
┌─────────────────────────────────────┐
│  Header / Navigation                 │  (固定於頂部)
├─────────────────────────────────────┤
│  Hero Section                        │
│  - 主視覺 Banner                     │
│  - 標題：出國前確認清單              │
│  - 副標題 + 簡短說明                 │
├─────────────────────────────────────┤
│  進度顯示區                          │
│  - 總體完成進度條                    │
│  - 已完成 / 總數統計                 │
│  - 各分類完成度一覽                  │
├─────────────────────────────────────┤
│  功能按鈕列                          │
│  [全部展開] [全部收合] [重置清單]    │
│  [列印] [匯出]                       │
├─────────────────────────────────────┤
│  清單內容區                          │
│  ┌─────────────────────────────┐   │
│  │ 🪪 重要證件 (12/12) ▼       │   │
│  ├─────────────────────────────┤   │
│  │ ☐ 護照（有效期限需6個月以上）│   │
│  │ ☑ VJW QR Code 截圖          │   │
│  │ ...                          │   │
│  └─────────────────────────────┘   │
│                                      │
│  ┌─────────────────────────────┐   │
│  │ 🔌 電子產品 (5/7) ▼         │   │
│  ├─────────────────────────────┤   │
│  │ ...                          │   │
│  └─────────────────────────────┘   │
│                                      │
│  （其他分類...）                     │
├─────────────────────────────────────┤
│  自訂項目區                          │
│  ➕ 新增自訂項目                     │
│  - 自訂項目列表                      │
├─────────────────────────────────────┤
│  實用提醒區                          │
│  - 氣候提醒                          │
│  - 行李限重資訊                      │
│  - 禁帶物品提醒                      │
├─────────────────────────────────────┤
│  行程連結區                          │
│  - CTA：查看四天行程安排             │
├─────────────────────────────────────┤
│  Footer                              │
└─────────────────────────────────────┘
```

---

## 3. 詳細組件規格

### 3.1 Hero Section

#### Desktop 版本
```
┌─────────────────────────────────────────┐
│                                          │
│      [背景圖：行李箱 / 機場 / 旅行意象]  │
│                                          │
│         🧳 出國前確認清單                │
│                                          │
│    輕鬆打包，不漏帶！前往沖繩的完美準備  │
│                                          │
└─────────────────────────────────────────┘
```

#### 規格說明
- **高度**：Desktop 400px / Mobile 280px
- **背景圖片**：
  - 尺寸：1920x600px
  - 風格：清新、旅行感、行李箱或機場意象
  - 濾鏡：淺色遮罩，確保文字可讀性
- **標題文字**：
  - 字級：Desktop 48px / Mobile 32px
  - 顏色：白色 (#FFFFFF)
  - 字重：Bold (700)
  - 文字陰影：0 2px 4px rgba(0,0,0,0.3)
- **副標題文字**：
  - 字級：Desktop 20px / Mobile 16px
  - 顏色：白色 (#FFFFFF)
  - 字重：Regular (400)

---

### 3.2 進度顯示區

#### 視覺設計
```
┌─────────────────────────────────────────┐
│  📊 打包進度                             │
│                                          │
│  ████████████░░░░░░░░  45/78 (58%)      │
│                                          │
│  🪪 重要證件: 10/12  🔌 電子產品: 5/7   │
│  👕 個人衣物: 8/15   🧴 盥洗保養: 12/14 │
│  💊 常備藥品: 3/5    🎒 其他必備: 7/15  │
└─────────────────────────────────────────┘
```

#### 功能規格

**總體進度條**：
- 寬度：100% (最大 800px)
- 高度：24px
- 圓角：12px
- 背景色：淺灰 (#E0E0E0)
- 進度色：主色漸層 (#1E88E5 → #42A5F5)
- 動畫：勾選時平滑增長（transition: 0.3s ease）

**統計文字**：
- 格式：`已完成 / 總數 (百分比%)`
- 顏色：深灰 (#333333)
- 字級：18px
- 位置：進度條右側或下方（Mobile）

**分類完成度一覽**：
- 排列：2 欄（Desktop）/ 1 欄（Mobile）
- 顯示：圖示 + 分類名稱 + 數字
- 顏色標示：
  - 100% 完成：綠色 (#4CAF50)
  - 50-99%：橙色 (#FF9800)
  - 0-49%：灰色 (#9E9E9E)

**互動效果**：
- 點擊分類名稱可快速跳轉至該分類
- Hover 時底色變淺
- 加入 `<a href="#section-documents">` 錨點連結

---

### 3.3 功能按鈕列

#### 按鈕配置（Desktop）
```
┌─────────────────────────────────────────┐
│ [全部展開] [全部收合] [重置清單] | [列印] [匯出] │
└─────────────────────────────────────────┘
```

#### 按鈕配置（Mobile）
```
┌──────────────────────┐
│ [全部展開] [全部收合] │
│ [重置清單]            │
│ [列印]    [匯出]      │
└──────────────────────┘
```

#### 按鈕規格

| 按鈕名稱 | 功能說明 | 樣式 | 圖示 |
|---------|---------|------|------|
| 全部展開 | 展開所有分類清單 | Secondary（白底藍框） | ▼ |
| 全部收合 | 收合所有分類清單 | Secondary | ▲ |
| 重置清單 | 清除所有勾選狀態 | Danger（紅色） | 🔄 |
| 列印 | 開啟列印預覽 | Secondary | 🖨️ |
| 匯出 | 匯出為文字檔 | Primary（藍色填滿） | 📥 |

**按鈕尺寸**：
- Padding：10px 20px
- 字級：14px
- 圓角：8px
- 間距：8px

**重置清單確認對話框**：
```javascript
// 點擊「重置清單」時跳出確認視窗
if (confirm('確定要清除所有勾選紀錄嗎？此操作無法復原。')) {
    // 執行重置
}
```

---

### 3.4 清單內容區 - 分類卡片

#### 單一分類卡片結構
```html
<section id="section-documents" class="checklist-category">
    <div class="category-header" data-category="documents">
        <span class="category-icon">🪪</span>
        <h2 class="category-title">重要證件</h2>
        <span class="category-count">(10/12)</span>
        <button class="toggle-btn">▼</button>
    </div>
    <div class="category-content" data-category="documents">
        <ul class="checklist-items">
            <li class="checklist-item">
                <input type="checkbox" id="doc-passport" data-category="documents">
                <label for="doc-passport">
                    <span class="checkbox-custom"></span>
                    <span class="item-text">護照（有效期限需 6 個月以上）</span>
                </label>
            </li>
            <!-- 更多項目... -->
        </ul>
    </div>
</section>
```

#### 分類標題列 (category-header)
- **高度**：60px
- **背景色**：
  - 未完成：淺藍 (#E3F2FD)
  - 100% 完成：淺綠 (#E8F5E9)
- **圓角**：12px（展開時僅上方圓角）
- **Padding**：16px 20px
- **排列**：Flexbox，左右對齊
- **Hover 效果**：背景色加深 5%
- **Cursor**：pointer（整列可點擊展開/收合）

**圖示 (category-icon)**：
- 字級：24px
- Margin-right：12px

**標題文字 (category-title)**：
- 字級：20px (Desktop) / 18px (Mobile)
- 字重：600
- 顏色：深灰 (#333333)

**數量標示 (category-count)**：
- 字級：16px
- 顏色：中灰 (#666666)
- 格式：`(已完成/總數)`

**展開/收合按鈕 (toggle-btn)**：
- 大小：32x32px
- 圓形背景：白色
- 圖示：▼（展開）/ ▲（收合）
- 旋轉動畫：transition: transform 0.3s ease

#### 清單內容區 (category-content)
- **背景色**：白色 (#FFFFFF)
- **邊框**：1px solid #E0E0E0
- **圓角**：底部 12px
- **Padding**：20px
- **動畫**：展開/收合使用 max-height + transition
  - 收合：`max-height: 0; overflow: hidden;`
  - 展開：`max-height: 2000px; overflow: visible;`
  - 過渡時間：0.4s ease

---

### 3.5 清單項目 (Checklist Item)

#### 視覺設計
```
┌─────────────────────────────────────────┐
│ ☐  護照（有效期限需 6 個月以上）         │
│ ☑  VJW（Visit Japan Web）QR Code 截圖   │ (已勾選，灰色刪除線)
│ ☐  簽證 (確認是否辦妥)                   │
└─────────────────────────────────────────┘
```

#### HTML 結構
```html
<li class="checklist-item">
    <input type="checkbox" id="doc-passport" data-category="documents">
    <label for="doc-passport">
        <span class="checkbox-custom"></span>
        <span class="item-text">護照（有效期限需 6 個月以上）</span>
    </label>
</li>
```

#### CSS 規格

**項目容器 (checklist-item)**：
- Display：block
- Padding：12px 0
- 邊框底部：1px solid #F0F0F0（最後一項除外）
- Hover：背景色 #F9F9F9

**原生 Checkbox**：
- 隱藏：`opacity: 0; position: absolute;`

**自訂 Checkbox (checkbox-custom)**：
- 大小：24x24px
- 圓角：6px
- 邊框：2px solid #BDBDBD
- 背景色：白色
- Display：inline-flex
- 對齊方式：align-items: center; justify-content: center
- Margin-right：12px

**勾選狀態**：
```css
input[type="checkbox"]:checked + label .checkbox-custom {
    background-color: #1E88E5;
    border-color: #1E88E5;
}

input[type="checkbox"]:checked + label .checkbox-custom::after {
    content: '✓';
    color: white;
    font-size: 16px;
    font-weight: bold;
}

input[type="checkbox"]:checked + label .item-text {
    color: #9E9E9E;
    text-decoration: line-through;
}
```

**勾選動畫**：
- Checkbox 勾選時：放大效果（scale 1.1 → 1.0）
- 文字變灰：transition: 0.2s ease

**Label 文字 (item-text)**：
- 字級：16px (Desktop) / 14px (Mobile)
- 行高：1.6
- 顏色：深灰 (#333333)
- Cursor：pointer

---

### 3.6 清單資料結構

#### JavaScript 資料格式

```javascript
const packingListData = {
    documents: {
        title: "重要證件",
        icon: "🪪",
        items: [
            { id: "doc-passport", text: "護照（有效期限需 6 個月以上）", checked: false },
            { id: "doc-vjw", text: "VJW（Visit Japan Web）QR Code 截圖", checked: false },
            { id: "doc-visa", text: "簽證 (確認是否辦妥)", checked: false },
            { id: "doc-ticket", text: "機票 (電子/紙本確認單)", checked: false },
            { id: "doc-hotel", text: "住宿預訂證明", checked: false },
            { id: "doc-cash", text: "日幣現鈔（建議多換小額，如千圓鈔）", checked: false },
            { id: "doc-credit-card", text: "信用卡（若有事先購買 JR 票券，需攜帶同一張卡）", checked: false },
            { id: "doc-ic-card", text: "交通 IC 卡（Suica / PASMO / Kitaca）", checked: false },
            { id: "doc-insurance", text: "旅遊平安險保單", checked: false },
            { id: "doc-id-copy", text: "台灣身分證影本（備用）", checked: false },
            { id: "doc-health-card", text: "健保卡", checked: false },
            { id: "doc-emergency", text: "緊急聯絡資訊", checked: false }
        ]
    },
    electronics: {
        title: "電子產品",
        icon: "🔌",
        items: [
            { id: "elec-sim", text: "網卡 / eSIM（確認開通日期）", checked: false },
            { id: "elec-powerbank", text: "行動電源（低溫耗電快，建議攜帶 2 顆）", checked: false },
            { id: "elec-charger", text: "充電器", checked: false },
            { id: "elec-cable", text: "傳輸線", checked: false },
            { id: "elec-adapter", text: "轉接頭（日本為雙孔扁插，台灣可通用）", checked: false },
            { id: "elec-camera", text: "相機 / 底片（低溫需注意電池保暖）", checked: false },
            { id: "elec-sim-pin", text: "取卡針", checked: false }
        ]
    },
    clothing: {
        title: "個人衣物（含保暖）",
        icon: "👕",
        items: [
            { id: "cloth-underwear", text: "換洗衣物（內衣褲 / 上衣 / 襪子）", checked: false },
            { id: "cloth-pajamas", text: "睡衣（飯店多附浴衣，怕冷或不習慣可自備）", checked: false },
            { id: "cloth-jacket", text: "防風防水羽絨外套（洋蔥式穿法）", checked: false },
            { id: "cloth-heattech", text: "發熱衣 / 發熱褲（Heatech 極暖 / 超極暖）", checked: false },
            { id: "cloth-pants", text: "一般長褲 / 刷毛褲", checked: false },
            { id: "cloth-socks", text: "厚毛襪 / 羊毛襪（建議多帶）", checked: false },
            { id: "cloth-scarf", text: "圍巾 / 脖圍", checked: false }
        ]
    },
    toiletries: {
        title: "盥洗 / 保養 / 化妝",
        icon: "🧴",
        items: [
            { id: "toil-makeup", text: "化妝品（底妝 / 彩妝）", checked: false },
            { id: "toil-skincare", text: "保養品（建議油類 / 霜類，日本氣候極乾）", checked: false },
            { id: "toil-makeup-remover", text: "卸妝乳 / 卸妝油", checked: false },
            { id: "toil-cleanser", text: "洗面乳", checked: false },
            { id: "toil-toothbrush", text: "牙刷 / 牙膏（日本提倡環保，部分飯店不提供）", checked: false },
            { id: "toil-floss", text: "牙線棒 / 棉花棒", checked: false },
            { id: "toil-shampoo", text: "洗髮乳 / 潤髮乳（飯店有，可自備慣用款）", checked: false },
            { id: "toil-lotion", text: "高保濕乳液 / 護手霜", checked: false },
            { id: "toil-lip-balm", text: "護唇膏", checked: false },
            { id: "toil-contact", text: "隱形眼鏡 / 藥水", checked: false }
        ]
    },
    medicine: {
        title: "常備藥品",
        icon: "💊",
        items: [
            { id: "med-cold", text: "感冒藥（含退燒）", checked: false },
            { id: "med-stomach", text: "腸胃藥", checked: false },
            { id: "med-pain", text: "止痛藥", checked: false },
            { id: "med-motion", text: "暈車藥（搭巴士）", checked: false },
            { id: "med-bandaid", text: "OK 繃 / 外傷藥膏", checked: false }
        ]
    },
    others: {
        title: "其他必備",
        icon: "🎒",
        items: [
            { id: "other-mask", text: "口罩（機上 / 人多處防護）", checked: false },
            { id: "other-laundry-bag", text: "髒衣袋 / 收納袋", checked: false },
            { id: "other-bottle", text: "空水壺（日本水龍頭可生飲，攜帶容器較方便）", checked: false },
            { id: "other-heat-pack", text: "暖暖包（貼式 / 手握，多準備）", checked: false },
            { id: "other-umbrella", text: "摺疊傘（以防濕雪 / 暴風雪）", checked: false },
            { id: "other-eco-bag", text: "購物袋（環保袋）", checked: false },
            { id: "other-compression-bag", text: "衣物壓縮袋（厚重衣物好收納）", checked: false },
            { id: "other-wet-wipes", text: "濕紙巾 / 酒精棉片", checked: false },
            { id: "other-shoes", text: "好穿的鞋子", checked: false }
        ]
    }
};
```

---

### 3.7 自訂項目區

#### 視覺設計
```
┌─────────────────────────────────────────┐
│ ➕ 新增自訂項目                          │
│                                          │
│ [輸入項目名稱...] [新增]                 │
│                                          │
│ 你的自訂項目：                           │
│ ☐ 自拍棒                          [刪除] │
│ ☐ 保溫瓶                          [刪除] │
└─────────────────────────────────────────┘
```

#### 功能規格

**新增項目輸入框**：
- 寬度：100%（最大 600px）
- 高度：44px
- Padding：12px 16px
- 邊框：2px solid #BDBDBD
- 圓角：8px
- Placeholder：「輸入項目名稱...」
- Focus 時：邊框變藍色 (#1E88E5)

**新增按鈕**：
- 樣式：Primary（藍色填滿）
- 尺寸：44px 高度，Padding 16px 24px
- Margin-left：8px
- Hover：顏色加深

**自訂項目列表**：
- 顯示於自訂項目區下方
- 格式同一般清單項目
- 每個項目右側顯示「刪除」按鈕
  - 樣式：文字按鈕，紅色 (#F44336)
  - 字級：14px
  - Hover：底色變淺紅

**刪除確認**：
```javascript
// 點擊刪除時跳出確認
if (confirm(`確定要刪除「${itemText}」嗎？`)) {
    // 執行刪除
}
```

**LocalStorage 儲存**：
```javascript
{
    customItems: [
        { id: "custom-1", text: "自拍棒", checked: false },
        { id: "custom-2", text: "保溫瓶", checked: true }
    ]
}
```

---

### 3.8 實用提醒區

#### 內容結構
```
┌─────────────────────────────────────────┐
│ 💡 實用提醒                              │
│                                          │
│ 🌡️ 氣候提醒                             │
│ • 沖繩氣候溫暖潮濕，建議攜帶輕便衣物     │
│ • 夏季（6-9月）高溫多雨，務必攜帶防曬用品│
│ • 颱風季節（7-10月）建議準備雨具         │
│                                          │
│ 🧳 行李限重資訊                          │
│ • 托運行李：通常 20-30 公斤（依航空公司）│
│ • 隨身行李：7-10 公斤，尺寸限制 56x36x23cm│
│ • 液體限制：單瓶不超過 100ml，總量 1 公升│
│                                          │
│ ⚠️ 禁帶物品提醒                          │
│ • 肉類製品（含肉鬆、肉乾）禁止入境日本   │
│ • 新鮮水果、植物需檢疫                   │
│ • 行動電源僅限隨身攜帶，不可托運         │
│ • 打火機：隨身限 1 個，托運禁止           │
└─────────────────────────────────────────┘
```

#### 樣式規格
- **背景色**：淺黃 (#FFF9C4)
- **邊框**：2px solid #FDD835
- **圓角**：12px
- **Padding**：24px
- **Margin**：40px 0

**標題**：
- 字級：22px
- 字重：600
- 顏色：深灰 (#333333)
- Margin-bottom：20px

**子標題**（如「氣候提醒」）：
- 字級：18px
- 字重：600
- 顏色：深灰 (#333333)
- 圖示：前綴表情符號
- Margin：16px 0 8px 0

**列表文字**：
- 字級：16px
- 行高：1.8
- 顏色：深灰 (#333333)
- 列表樣式：實心圓點（•）
- Padding-left：20px

---

### 3.9 行程連結區（CTA）

#### 視覺設計
```
┌─────────────────────────────────────────┐
│                                          │
│        ✅ 打包完成了嗎？                 │
│                                          │
│     接下來查看我們精心規劃的四天行程！   │
│                                          │
│        [查看四天行程安排 →]              │
│                                          │
└─────────────────────────────────────────┘
```

#### 樣式規格
- **背景色**：主色漸層 (linear-gradient(135deg, #1E88E5, #42A5F5))
- **文字顏色**：白色 (#FFFFFF)
- **Padding**：60px 20px
- **文字對齊**：置中
- **圓角**：12px
- **Margin**：40px 0

**標題**：
- 字級：28px (Desktop) / 24px (Mobile)
- 字重：700
- Margin-bottom：12px

**描述文字**：
- 字級：18px (Desktop) / 16px (Mobile)
- 字重：400
- Opacity：0.95
- Margin-bottom：24px

**CTA 按鈕**：
- 背景色：白色 (#FFFFFF)
- 文字顏色：主色 (#1E88E5)
- Padding：14px 32px
- 字級：18px
- 字重：600
- 圓角：8px
- 陰影：0 4px 12px rgba(0,0,0,0.15)
- Hover：陰影加深 + 輕微上移

---

## 4. 互動功能規格

### 4.1 勾選/取消勾選

**觸發條件**：
- 點擊 Checkbox
- 點擊 Label 文字

**執行流程**：
1. 切換 Checkbox 的 `checked` 狀態
2. 更新視覺樣式（打勾圖示、文字刪除線）
3. 更新該分類的完成數量 `(X/Y)`
4. 更新總體進度條
5. 儲存狀態至 LocalStorage
6. 播放勾選動畫（Scale 效果）

**動畫效果**：
```css
@keyframes checkAnimation {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
}
```

---

### 4.2 展開/收合分類

**觸發條件**：
- 點擊分類標題列（整列可點擊）
- 點擊展開/收合按鈕

**執行流程**：
1. 切換 `data-expanded` 屬性（true/false）
2. 切換 `category-content` 的 `max-height`
   - 收合：`max-height: 0; overflow: hidden;`
   - 展開：`max-height: 2000px; overflow: visible;`
3. 旋轉按鈕圖示（▼ → ▲）
4. 播放平滑過渡動畫（0.4s ease）
5. 儲存展開狀態至 LocalStorage（選用）

**預設狀態**：
- 所有分類預設為展開

---

### 4.3 全部展開/收合

**全部展開**：
- 遍歷所有分類，設定 `data-expanded="true"`
- 展開所有 `category-content`

**全部收合**：
- 遍歷所有分類，設定 `data-expanded="false"`
- 收合所有 `category-content`

---

### 4.4 重置清單

**觸發條件**：
- 點擊「重置清單」按鈕

**執行流程**：
1. 顯示確認對話框
   ```javascript
   if (confirm('確定要清除所有勾選紀錄嗎？此操作無法復原。')) {
       // 執行重置
   }
   ```
2. 如果確認：
   - 取消所有 Checkbox 的 `checked` 狀態
   - 清除 LocalStorage 中的勾選記錄
   - 重置所有自訂項目
   - 更新進度條至 0%
   - 更新所有分類計數至 `(0/X)`
3. 顯示成功訊息（Toast 通知）

---

### 4.5 列印功能

**觸發條件**：
- 點擊「列印」按鈕

**執行流程**：
1. 呼叫 `window.print()`
2. 使用專用的列印樣式表 `@media print`

**列印樣式 (print.css)**：
```css
@media print {
    /* 隱藏不必要元素 */
    header, footer, .function-buttons, .cta-section {
        display: none !important;
    }

    /* 展開所有分類 */
    .category-content {
        max-height: none !important;
        overflow: visible !important;
    }

    /* 調整顏色 */
    body {
        background: white;
        color: black;
    }

    /* 避免分頁中斷 */
    .checklist-category {
        page-break-inside: avoid;
    }

    /* 顯示已勾選項目的視覺標記 */
    input[type="checkbox"]:checked + label::before {
        content: '☑ ';
    }
}
```

---

### 4.6 匯出功能

**觸發條件**：
- 點擊「匯出」按鈕

**匯出格式**：純文字檔 (.txt)

**匯出內容範例**：
```
========================================
       出國前確認清單
       卡在國際通
========================================

總進度：45/78 (58%)

----------------------------------------
🪪 重要證件 (10/12)
----------------------------------------
☑ 護照（有效期限需 6 個月以上）
☐ VJW（Visit Japan Web）QR Code 截圖
☑ 簽證 (確認是否辦妥)
...

----------------------------------------
🔌 電子產品 (5/7)
----------------------------------------
☑ 網卡 / eSIM（確認開通日期）
☐ 行動電源（低溫耗電快，建議攜帶 2 顆）
...

（以此類推...）

========================================
匯出時間：2024-01-15 14:30:00
網址：https://stuckinkokusai.com
========================================
```

**JavaScript 實作**：
```javascript
function exportChecklist() {
    let content = generateTextContent();
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = '出國前確認清單.txt';
    a.click();
    URL.revokeObjectURL(url);
}
```

---

### 4.7 新增自訂項目

**觸發條件**：
- 在輸入框輸入文字
- 點擊「新增」按鈕
- 按下 Enter 鍵

**執行流程**：
1. 驗證輸入內容（不可為空）
2. 產生唯一 ID（`custom-${timestamp}`）
3. 建立新的清單項目（Checkbox + Label）
4. 插入至自訂項目列表
5. 儲存至 LocalStorage
6. 清空輸入框
7. 更新總數與進度條

**錯誤處理**：
- 如果輸入為空：顯示錯誤提示「請輸入項目名稱」
- 如果項目重複：顯示警告「此項目已存在」

---

### 4.8 刪除自訂項目

**觸發條件**：
- 點擊自訂項目右側的「刪除」按鈕

**執行流程**：
1. 顯示確認對話框
   ```javascript
   if (confirm(`確定要刪除「${itemText}」嗎？`)) {
       // 執行刪除
   }
   ```
2. 如果確認：
   - 從 DOM 移除該項目
   - 從 LocalStorage 移除
   - 更新總數與進度條
   - 顯示成功訊息

---

### 4.9 LocalStorage 資料管理

**儲存格式**：
```javascript
{
    "packingList": {
        "documents": {
            "doc-passport": true,
            "doc-vjw": false,
            // ...
        },
        "electronics": {
            "elec-sim": true,
            // ...
        },
        // 其他分類...
        "customItems": [
            { "id": "custom-1703001234567", "text": "自拍棒", "checked": false }
        ]
    },
    "expandedCategories": {
        "documents": true,
        "electronics": false,
        // ...
    }
}
```

**儲存時機**：
- 勾選/取消勾選項目時
- 展開/收合分類時（選用）
- 新增/刪除自訂項目時
- 重置清單時

**讀取時機**：
- 頁面載入時（`DOMContentLoaded` 事件）

**容量考量**：
- LocalStorage 限制：約 5-10MB（各瀏覽器不同）
- 本清單資料量：< 10KB，完全足夠

---

## 5. 響應式設計

### 5.1 斷點規劃

| 裝置 | 寬度範圍 | 佈局 |
|------|---------|------|
| Mobile | < 768px | 單欄，漢堡選單 |
| Tablet | 768px - 1023px | 單欄，部分區域 2 欄 |
| Desktop | ≥ 1024px | 最大寬度 1200px，置中 |

### 5.2 Mobile 優化 (< 768px)

**Hero Section**：
- 高度：280px
- 標題字級：32px
- 副標題字級：16px

**進度顯示區**：
- 分類完成度：1 欄排列
- 統計文字：居中顯示

**功能按鈕列**：
- 按鈕寬度：100%
- 垂直排列
- Margin-bottom：8px

**清單項目**：
- Checkbox 大小：20x20px（觸控區域 44x44px）
- 文字字級：14px
- Padding：10px 0

**自訂項目輸入框**：
- 寬度：100%
- 新增按鈕：全寬，移至輸入框下方

**實用提醒區**：
- Padding：16px
- 字級：14px

### 5.3 Tablet (768px - 1023px)

**進度顯示區**：
- 分類完成度：2 欄排列

**功能按鈕列**：
- 按鈕並排，2-3 個一列

**清單佈局**：
- 保持單欄
- 增加左右 Padding

### 5.4 Desktop (≥ 1024px)

**容器寬度**：
- 最大寬度：1200px
- 左右自動 margin（置中）

**進度顯示區**：
- 分類完成度：3 欄排列（或 2 欄）

**功能按鈕列**：
- 左側：全部展開、全部收合、重置清單
- 右側：列印、匯出
- 使用 Flexbox `justify-content: space-between`

**Hover 效果**：
- 清單項目 Hover：背景色變化
- 按鈕 Hover：顏色加深、陰影增強

---

## 6. 效能優化

### 6.1 圖片優化
- Hero 背景圖使用 WebP 格式
- 提供多種尺寸（srcset）
- 使用 lazy loading

### 6.2 CSS 優化
- 使用 CSS Variables 統一管理
- 避免過度巢狀
- 關鍵 CSS 內聯（首屏）

### 6.3 JavaScript 優化
- 使用事件委派（Event Delegation）處理大量 Checkbox
- Debounce LocalStorage 寫入（避免頻繁寫入）
- 延遲載入非關鍵功能

**事件委派範例**：
```javascript
// ✅ Good: 使用事件委派
document.querySelector('.checklist-categories').addEventListener('change', (e) => {
    if (e.target.type === 'checkbox') {
        handleCheckboxChange(e.target);
    }
});

// ❌ Bad: 為每個 Checkbox 綁定事件
document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', handleCheckboxChange);
});
```

### 6.4 LocalStorage 優化

**Debounce 寫入**：
```javascript
let saveTimeout;
function saveToLocalStorage(data) {
    clearTimeout(saveTimeout);
    saveTimeout = setTimeout(() => {
        localStorage.setItem('packingList', JSON.stringify(data));
    }, 500); // 延遲 500ms 寫入
}
```

---

## 7. 無障礙設計 (Accessibility)

### 7.1 鍵盤操作
- 所有互動元素可用 Tab 鍵導覽
- Checkbox 可用 Space 鍵勾選
- Enter 鍵可展開/收合分類
- 焦點指示清楚可見（outline）

### 7.2 螢幕閱讀器支援

**ARIA 標籤**：
```html
<section
    id="section-documents"
    class="checklist-category"
    role="region"
    aria-labelledby="category-documents-title"
>
    <div class="category-header" data-category="documents">
        <h2 id="category-documents-title" class="category-title">
            重要證件
        </h2>
        <span class="category-count" aria-label="已完成 10 項，共 12 項">
            (10/12)
        </span>
        <button
            class="toggle-btn"
            aria-expanded="true"
            aria-controls="category-documents-content"
            aria-label="收合重要證件清單"
        >
            ▼
        </button>
    </div>
    <div
        id="category-documents-content"
        class="category-content"
        role="list"
    >
        <ul class="checklist-items">
            <li class="checklist-item" role="listitem">
                <input
                    type="checkbox"
                    id="doc-passport"
                    aria-describedby="doc-passport-desc"
                >
                <label for="doc-passport">
                    <span class="checkbox-custom" aria-hidden="true"></span>
                    <span id="doc-passport-desc" class="item-text">
                        護照（有效期限需 6 個月以上）
                    </span>
                </label>
            </li>
        </ul>
    </div>
</section>
```

### 7.3 顏色對比
- 文字對背景對比度 ≥ 4.5:1（WCAG AA）
- 已勾選項目文字顏色：#9E9E9E（對白底對比度 3.5:1，符合大字標準）

### 7.4 錯誤提示
- 表單驗證錯誤使用文字說明
- 不僅依賴顏色傳達資訊
- 使用 `role="alert"` 即時通知錯誤

---

## 8. 瀏覽器相容性

### 8.1 必須支援
- Chrome 90+ ✅
- Safari 14+ ✅
- Firefox 88+ ✅
- Edge 90+ ✅
- iOS Safari 14+ ✅
- Chrome Mobile ✅

### 8.2 功能降級
- LocalStorage 不支援時：顯示警告，功能照常運作（不儲存）
- CSS Grid 不支援時：使用 Flexbox 降級

**檢測範例**：
```javascript
if (!window.localStorage) {
    alert('您的瀏覽器不支援儲存功能，勾選狀態將不會被保存。');
}
```

---

## 9. 測試計劃

### 9.1 功能測試清單

| 項目 | 測試案例 | 預期結果 |
|------|---------|---------|
| 勾選項目 | 點擊 Checkbox | 顯示勾勾、文字刪除線、更新進度 |
| 取消勾選 | 再次點擊 | 取消勾勾、文字恢復、更新進度 |
| 展開分類 | 點擊分類標題 | 展開清單內容，按鈕旋轉 |
| 收合分類 | 再次點擊 | 收合清單內容，按鈕旋轉回來 |
| 全部展開 | 點擊按鈕 | 所有分類展開 |
| 全部收合 | 點擊按鈕 | 所有分類收合 |
| 重置清單 | 點擊按鈕 → 確認 | 所有勾選清除，進度歸零 |
| 重置清單 | 點擊按鈕 → 取消 | 無變化 |
| 新增自訂項目 | 輸入文字 → 新增 | 項目出現在清單中 |
| 刪除自訂項目 | 點擊刪除 → 確認 | 項目從清單移除 |
| 列印 | 點擊列印按鈕 | 開啟列印預覽，隱藏不必要元素 |
| 匯出 | 點擊匯出按鈕 | 下載 .txt 檔案 |
| LocalStorage | 勾選項目 → 重新整理 | 勾選狀態保留 |
| 進度條 | 勾選/取消項目 | 進度條即時更新 |
| 分類計數 | 勾選/取消項目 | 分類計數即時更新 |

### 9.2 響應式測試

**測試裝置尺寸**：
- iPhone SE (375px)
- iPhone 12 Pro (390px)
- iPhone 14 Pro Max (430px)
- iPad (768px)
- iPad Pro (1024px)
- Desktop (1920px)

**測試項目**：
- 佈局不破版
- 文字可讀
- 按鈕可點擊（觸控區域足夠）
- 圖片正常顯示
- 動畫流暢

### 9.3 效能測試
- Lighthouse 分數 > 90
- 首次載入時間 < 2s
- 勾選回應時間 < 100ms

### 9.4 無障礙測試
- 使用 WAVE 工具檢測
- 鍵盤完全可操作
- 螢幕閱讀器測試（NVDA / VoiceOver）

---

## 10. 開發時程

### Week 1: HTML + CSS 基礎架構
- ✅ 建立 HTML 結構
- ⬜ 撰寫 CSS Reset、Variables
- ⬜ 完成 Header、Footer
- ⬜ 完成 Hero Section
- ⬜ 完成進度顯示區樣式
- ⬜ 完成清單項目樣式

### Week 2: JavaScript 功能開發
- ⬜ 實作勾選/取消勾選
- ⬜ 實作展開/收合
- ⬜ 實作全部展開/收合
- ⬜ 實作進度計算
- ⬜ 實作 LocalStorage 儲存/讀取
- ⬜ 實作新增/刪除自訂項目

### Week 3: 進階功能 + 優化
- ⬜ 實作重置清單
- ⬜ 實作列印功能
- ⬜ 實作匯出功能
- ⬜ RWD 調整
- ⬜ 動畫效果優化
- ⬜ 效能優化

### Week 4: 測試與修正
- ⬜ 功能測試
- ⬜ 跨瀏覽器測試
- ⬜ 響應式測試
- ⬜ 無障礙測試
- ⬜ Bug 修復
- ⬜ 最終調整

---

## 11. 附錄

### 11.1 參考設計
- Notion Checklist Template
- Todoist 任務清單
- Google Keep 清單功能
- Trello Checklist

### 11.2 技術參考
- [MDN: LocalStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- [MDN: Checkbox Accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/checkbox_role)
- [CSS Tricks: Custom Checkboxes](https://css-tricks.com/custom-styling-form-inputs-with-modern-css-features/)

### 11.3 圖示資源
- [Feather Icons](https://feathericons.com/)
- [Material Icons](https://fonts.google.com/icons)
- [Emoji](https://emojipedia.org/)

---

## 12. 更新紀錄

| 日期 | 版本 | 變更內容 | 負責人 |
|------|------|---------|--------|
| 2024-XX-XX | v1.0 | 初版規格建立 | PM |

---

**規格文件結束**

這份規格書已經非常完整，涵蓋了所有技術細節、互動邏輯、視覺設計、響應式設計、無障礙設計、測試計劃等。接下來可以直接依照此規格進行開發！
